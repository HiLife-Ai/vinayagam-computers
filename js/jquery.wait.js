!function(e){e.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"]},e.expr[":"].uncached=function(r){if(!e(r).is('img[src!=""]'))return!1;var a=new Image;return a.src=r.src,!a.complete},e.fn.waitForImages=function(r,a,n){var c=0,i=0;if(e.isPlainObject(arguments[0])&&(n=arguments[0].waitForAll,a=arguments[0].each,r=arguments[0].finished),r=r||e.noop,a=a||e.noop,n=!!n,!e.isFunction(r)||!e.isFunction(a))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var t=e(this),s=[],o=e.waitForImages.hasImageProperties||[],u=/url\(\s*(['"]?)(.*?)\1\s*\)/g;n?t.find("*").addBack().each(function(){var r=e(this);r.is("img:uncached")&&s.push({src:r.attr("src"),element:r[0]}),e.each(o,function(e,a){var n,c=r.css(a);if(!c)return!0;for(;n=u.exec(c);)s.push({src:n[2],element:r[0]})})}):t.find("img:uncached").each(function(){s.push({src:this.src,element:this})}),c=s.length,i=0,0===c&&r.call(t[0]),e.each(s,function(n,s){var o=new Image;e(o).on("load.waitForImages error.waitForImages",function(e){if(i++,a.call(s.element,i,c,"load"==e.type),i==c)return r.call(t[0]),!1}),o.src=s.src})})}}(jQuery);